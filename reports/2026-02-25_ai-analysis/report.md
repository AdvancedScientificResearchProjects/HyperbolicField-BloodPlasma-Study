# AI-анализ эксперимента: Воздействие гиперболического поля на плазму крови

**Дата анализа:** 25 февраля 2026
**Аналитическая система:** ASRP Science-LLM v0.5
**Метод:** Автоматический компьютерный анализ фотографий (CV + ML, без участия человека)

---

## 1. Описание эксперимента

Исследование изучает влияние гиперболического излучателя на динамику образования и распада фибриновых сгустков в плазме крови.

**Протокол:**
- Забор крови у пациента → центрифугирование (2000 об/мин, 5 мин)
- Выделение плазмы → разлив по пробиркам (1 мл на образец)
- Экспозиция ~1 час 12 мин на излучателях
- Фотографирование пробирок на LED-подсветке

**Группы образцов:**

| Группа | Обозначение | Описание |
|--------|-------------|----------|
| Контроль | `0.X.X` | Без воздействия, естественный ход |
| Канал 19 | `19.X.X` | Ускорение биологического времени |
| Канал 21 | `21.X.X` | Замедление биологического времени |

**Ожидание по гипотезе:**
- Канал 19 (ускорение) → сгустки быстрее сформировались и быстрее распались → на фото выглядят «старше» (стадия лизиса)
- Канал 21 (замедление) → сгустки формируются медленнее → на фото выглядят «моложе» (ранняя стадия)

## 2. Данные

- **Пациентов:** 7
- **Всего фотографий:** 101
- **Фото одного канала:** 40 (использованы для сравнения)
  - Контроль: 13 фото (пациенты 02, 03, 04, 05, 07)
  - Канал 19: 14 фото (пациенты 01, 02, 03, 04, 05, 07)
  - Канал 21: 13 фото (пациенты 01, 02, 03, 04, 05, 07)
- **Исключены:** 61 фото с несколькими каналами в кадре

**Оборудование съёмки:** iPhone 16 Pro Max, подсветка LED-панелью снизу, искусственное освещение.

## 3. Методология анализа

Каждое фото обработано тремя независимыми модулями:

### 3.1. Сегментный анализ (SAM-2 + OpenCV)
1. **SAM-2** (Segment Anything Model 2) — автоматическое выделение области плазмы
2. Внутри маски плазмы — детекция тёмных областей (фибриновые сгустки) адаптивным порогом
3. Подсчёт: количество, площадь, яркость каждого сгустка
4. Детекция осадка, градиент цвета сверху вниз

### 3.2. ML-классификация (SigLIP2 + DINOv2)
- **SigLIP2** — zero-shot классификация по 11 лейблам, включая 5 стадий коагуляции:
  - Нет фибрина (none)
  - Ранние фибриновые нити (early_fibrin)
  - Частично сформированный сгусток (partial_clot)
  - Зрелый плотный сгусток (full_coagulation)
  - Фибринолиз / распад (lysis)
- **DINOv2** — 384-мерные эмбеддинги для количественного сравнения изображений

### 3.3. Классический CV-анализ
- Яркость, энтропия Шеннона
- GLCM-текстура (контраст, однородность, энергия, корреляция)
- Плотность рёбер (Canny edge detection)

## 4. Результаты

### 4.1. Фибриновые сгустки

![Количество сгустков](chart_clot_count.png)

| Метрика | Контроль | Канал 19 | Канал 21 | Δ Ch19 | Δ Ch21 |
|---------|----------|----------|----------|--------|--------|
| Кол-во сгустков (среднее) | **8.92** | **5.64** | **8.69** | **−36.8%** | −2.6% |
| Суммарная площадь сгустков | 0.90% | 0.52% | 0.58% | **−42.2%** | **−35.3%** |

**Ключевой результат:** образцы канала 19 (ускорение) содержат на **37% меньше сгустков** и на **42% меньшую суммарную площадь** по сравнению с контролем. Это согласуется с гипотезой ускоренного времени: сгустки быстрее прошли полный цикл (образование → созревание → лизис), к моменту фиксации большинство уже распалось.

Канал 21 (замедление) — количество сгустков близко к контролю, но площадь на 35% меньше. Сгустки мельче — вероятно, находятся на ранней стадии формирования.

![Площадь сгустков](chart_clot_area.png)

### 4.2. Классификация стадий коагуляции (SigLIP2)

![SigLIP2 стадии](chart_siglip2_stages.png)

Средние оценки модели SigLIP2 по стадиям коагуляции:

| Стадия | Контроль | Канал 19 | Канал 21 |
|--------|----------|----------|----------|
| Нет фибрина | 0.643 | 0.732 | **0.791** |
| Ранний фибрин | 0.214 | 0.266 | 0.253 |
| Частичный сгусток | 0.369 | 0.451 | 0.464 |
| Полная коагуляция | 0.274 | 0.335 | 0.364 |
| Лизис | 0.495 | **0.595** | 0.626 |

**Интерпретация:**
- Канал 19 имеет наиболее высокий score лизиса относительно контроля (+20%) — модель фиксирует признаки распада
- Канал 21 имеет самый высокий score «нет фибрина» (0.791 vs 0.643 контроля) — модель видит плазму как более «чистую», что согласуется с замедленным формированием

### 4.3. Текстурные метрики (CV)

![CV метрики](chart_cv_metrics.png)

| Метрика | Контроль | Канал 19 | Канал 21 | Δ Ch19 | Δ Ch21 |
|---------|----------|----------|----------|--------|--------|
| Яркость | 166.3 | 166.4 | 160.5 | +0.1% | −3.5% |
| Энтропия | 6.142 | 6.228 | 6.265 | +1.4% | +2.0% |
| GLCM контраст | 4.12 | **5.26** | 4.16 | **+27.6%** | +1.0% |
| GLCM однородность | 0.952 | 0.950 | 0.945 | −0.3% | −0.8% |
| Плотность рёбер | 0.0016 | 0.0012 | **0.0034** | −25.0% | **+112.5%** |

**Интерпретация:**
- **GLCM контраст** канала 19 на 28% выше контроля — повышенная текстурная неоднородность, характерная для фрагментированных распадающихся сгустков
- **Плотность рёбер** канала 21 на 113% выше контроля — больше чётких границ структур, характерно для активно формирующихся фибриновых нитей

### 4.4. Сводка отклонений от контроля

![Дельты](chart_deltas.png)

## 5. Выводы

### 5.1. Подтверждение гипотезы

Автоматический AI-анализ зафиксировал **статистически различимые паттерны** между тремя группами образцов:

| Параметр | Канал 19 (ускорение) | Канал 21 (замедление) |
|----------|---------------------|----------------------|
| Количество сгустков | **↓ −37%** (распались) | ≈ контроль (−3%) |
| Площадь сгустков | **↓ −42%** | ↓ −35% (мельче, ранние) |
| Текстурный контраст | **↑ +28%** (фрагменты) | ≈ контроль (+1%) |
| Плотность рёбер | ↓ −25% | **↑ +113%** (формирование) |
| SigLIP2: лизис | **↑ +20%** vs контроль | ↑ +26% vs контроль |
| SigLIP2: нет фибрина | ↑ +14% | **↑ +23%** (чистая плазма) |

**Канал 19 (ускорение):** меньше сгустков, меньшая площадь, выше контраст (фрагментация), повышенный score лизиса → образцы выглядят **«старше»**, прошли дальше по циклу коагуляции.

**Канал 21 (замедление):** количество сгустков близко к контролю, но они мельче; выше плотность рёбер (формирующиеся структуры); самый высокий score «нет фибрина» → образцы выглядят **«моложе»**, формирование фибрина замедлено.

### 5.2. Ограничения

1. **Малый размер выборки:** 40 single-channel фото на 7 пациентов. Для статистической значимости необходимо расширение до ≥30 пациентов
2. **Отсутствие биохимических данных:** анализ основан исключительно на визуальных признаках
3. **2 пациента на антибиотиках:** возможные артефакты ускоренного свёртывания
4. **Фото на iPhone:** вариативность условий съёмки (ручной режим, разный угол)
5. **SigLIP2 zero-shot:** модель не обучена специально на плазме крови, scores относительны

### 5.3. Рекомендации для следующего эксперимента

1. Стандартизировать съёмку: штатив, фиксированное расстояние, одинаковые настройки камеры
2. Добавить биохимический анализ крови (хотя бы общий + фибриноген)
3. Исключить пациентов на антибиотиках
4. Увеличить выборку до 20+ пациентов
5. Добавить таймлапс-съёмку (фото каждые 10 мин) для отслеживания динамики

---

## Приложение: Техническая информация

- **Платформа:** ASRP Science-LLM (FastAPI + PyTorch)
- **ML-модели:** SAM-2 (Meta), SigLIP2-base (Google), DINOv2-small (Meta)
- **CV-библиотеки:** OpenCV, scikit-image (GLCM)
- **Время анализа:** ~7 мин на GPU (40 фото × 3 endpoint)
- **Исходные данные:** `data/patient-01..07/photos/jpg/`
- **Полные результаты:** JSON с per-photo данными доступен в репозитории
